<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Full Body ‚Ä¢ 4-–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–µ—Ä–∏–æ–¥–∏–∑–∞—Ü–∏—è</title>
<style>
  :root{
    --bg:#0b0b0e;--panel:#15161a;--panel2:#121317;--soft:#0e0f12;
    --border:#2b2f36;--text:#ffd700;--muted:#b9aa68;--white:#f4f4f4;--radius:18px
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--white);font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}
  header{position:sticky;top:0;z-index:20;background:linear-gradient(180deg,#0b0b0e,rgba(11,11,14,.92));border-bottom:1px solid var(--border);padding:12px 16px 6px}
  .h1{margin:0;font-size:20px;font-weight:800;letter-spacing:.3px}
  .sub{margin-top:6px;color:var(--muted);font-size:12px}
  .controls{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
  select,.tab{background:var(--panel2);color:var(--white);border:1px solid var(--border);border-radius:12px;padding:8px 12px;font-weight:800}
  .tab.active{background:var(--text);color:#000;border-color:var(--text)}
  main{padding:14px;display:grid;gap:14px}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:0 10px 26px rgba(0,0,0,.25)}
  .head{display:flex;align-items:center;justify-content:space-between;padding:14px 14px 8px}
  .left{display:flex;gap:10px;align-items:center}
  .thumb{width:44px;height:44px;border-radius:12px;background:var(--soft);border:1px solid var(--border);display:grid;place-items:center}
  .title{font-weight:800;font-size:16px}
  .meta{font-size:12px;color:var(--muted)}
  .avatar{width:42px;height:42px;border-radius:999px;background:#0e0e10;border:1px solid var(--border);display:grid;place-items:center}
  .video{position:relative;background:#000}
  .video iframe{width:100%;aspect-ratio:16/9;border:0;display:block}
  .body{padding:14px;display:grid;gap:12px}
  .history{font-weight:700;color:#9aa0a6;font-size:13px}
  .date{font-size:14px;margin-top:8px;margin-bottom:6px;color:#d0d0d0}
  .sets{display:grid;gap:10px}
  .row{display:grid;grid-template-columns:40px 1fr 1fr;gap:10px;align-items:center}
  .badge{height:40px;border-radius:12px;border:1px solid var(--border);background:var(--soft);display:grid;place-items:center;color:var(--text);font-weight:800}
  .input{display:flex;gap:6px;align-items:center;background:#101215;border:1px solid var(--border);border-radius:12px;padding:12px}
  .input input{width:100%;background:transparent;border:0;outline:0;color:#fff;font-size:16px}
  .suffix{color:var(--muted);font-size:12px;text-transform:uppercase}
  .actions{display:flex;gap:8px;flex-wrap:wrap}
  .btn{border:1px solid var(--border);background:var(--panel2);color:#fff;border-radius:12px;padding:10px 14px;font-weight:800}
  .btn:hover{filter:brightness(1.04)}
  .btn.gold{background:var(--text);border-color:var(--text);color:#000}
  .bar{position:sticky;bottom:0;z-index:15;background:linear-gradient(0deg,#0b0b0e,rgba(11,11,14,.92));border-top:1px solid var(--border);padding:12px 14px;display:flex;gap:10px}
  .note{font-size:12px;color:var(--muted);text-align:center;margin:4px 0 12px}
</style>
</head>
<body>
  <header>
    <div class="h1">Full Body ‚Äî –í–µ—Ä—Ö –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ</div>
    <div class="sub">3 –¥–Ω—è (–ó–∞–ª ‚Ä¢ –ó–∞–ª ‚Ä¢ –î–æ–º) ‚Ä¢ 4-–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–µ—Ä–∏–æ–¥–∏–∑–∞—Ü–∏—è ‚Ä¢ –±–µ–∑ –æ—Å–µ–≤—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫</div>
    <div class="controls">
      <button class="tab active" data-day="1">–î–µ–Ω—å 1</button>
      <button class="tab" data-day="2">–î–µ–Ω—å 2</button>
      <button class="tab" data-day="3">–î–µ–Ω—å 3</button>
      <select id="weekSelect">
        <option value="1">–ù–µ–¥–µ–ª—è 1 ‚Äî –≤—Ç—è–≥–∏–≤–∞—é—â–∞—è</option>
        <option value="2">–ù–µ–¥–µ–ª—è 2 ‚Äî –Ω–∞–≥—Ä—É–∑–æ—á–Ω–∞—è</option>
        <option value="3">–ù–µ–¥–µ–ª—è 3 ‚Äî –ø–∏–∫–æ–≤–∞—è</option>
        <option value="4">–ù–µ–¥–µ–ª—è 4 ‚Äî —Ä–∞–∑–≥—Ä—É–∑–∫–∞</option>
      </select>
    </div>
  </header>

  <main id="root"></main>

  <div class="note">–ü—Ä–∞–≤–∏–ª–∞: RIR 1‚Äì2 ‚Üí 0‚Äì1 ‚Üí 0 (–ø–∏–∫) ‚Üí 2‚Äì3 (–¥–µ–ª–æ–∞–¥). –ù–µ–¥–µ–ª—è 2: +5% –≤–µ—Å–∞/ +1 –ø–æ–≤—Ç; –ù–µ–¥–µ–ª—è 3: +10%/ +1‚Äì2; –ù–µ–¥–µ–ª—è 4: ‚àí10‚Äì20% –∏ ‚àí1 –ø–æ–¥—Ö–æ–¥.</div>
  <div class="bar">
    <button class="btn" id="clearBtn">–û—á–∏—Å—Ç–∏—Ç—å –¥–µ–Ω—å</button>
    <button class="btn gold" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>

<script>
  // === –ü—Ä–æ–≥—Ä–∞–º–º–∞ + RuTube IDs (—Å +1 –ø–æ–¥—Ö–æ–¥–æ–º –Ω–∞ –î–Ω–µ 1 –∏ –î–Ω–µ 2) ===
  const PROGRAM = {
    1:[
      {t:"–ñ–∏–º —à—Ç–∞–Ω–≥–∏ –ª—ë–∂–∞", base:"4√ó8‚Äì10", sets:4, id:"29048ced12e2808a6097447cf00821fd"},
      {t:"–¢—è–≥–∞ –±–ª–æ–∫–∞ –∫ –ø–æ—è—Å—É", base:"4√ó8‚Äì10", sets:4, id:"e5f800727b6688c3ec31f62e48303cb0"},
      {t:"–ñ–∏–º –Ω–æ–≥–∞–º–∏", base:"4√ó8‚Äì10", sets:4, id:"6eb13cced1079f3c1c167ec187c0b324"},
      {t:"–ü–æ–¥—ä—ë–º —à—Ç–∞–Ω–≥–∏ –Ω–∞ –±–∏—Ü–µ–ø—Å", base:"3√ó12‚Äì16", sets:3, id:"9e19a98a96bf0fa3ed85b3d0b3e02a9d"},
      {t:"–ñ–∏–º –≤ —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ –¥–ª—è –ø–ª–µ—á", base:"3√ó12‚Äì16", sets:3, id:"dd55b827ba26093c43756fc93e0a0468"},
      {t:"–†–∞–∑–≥–∏–±–∞–Ω–∏–µ —Ç—Ä–∏—Ü–µ–ø—Å–∞ –≤ –±–ª–æ–∫–µ (–∫–∞–Ω–∞—Ç)", base:"3√ó12‚Äì16", sets:3, id:"c3b414b47e814f390ffda4cd02019b4d"}
    ],
    2:[
      {t:"–ñ–∏–º —à—Ç–∞–Ω–≥–∏ –ª—ë–∂–∞ –Ω–∞ –Ω–∞–∫–ª–æ–Ω–Ω–æ–π 45¬∞", base:"4√ó8‚Äì10", sets:4, id:"e585b41ea1a271381fb635e813257048"},
      {t:"–¢—è–≥–∞ –±–ª–æ–∫–∞ –æ–±—Ä–∞—Ç–Ω—ã–º —Ö–≤–∞—Ç–æ–º", base:"4√ó8‚Äì10", sets:4, id:"b705869d4680dfa63bfff8831610d191"},
      {t:"–†–∞–∑–≥–∏–±–∞–Ω–∏–µ –Ω–æ–≥ –≤ —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ", base:"4√ó8‚Äì10", sets:4, id:"f9add4e54a65649c36dc96b40e31091e"},
      {t:"–°–≥–∏–±–∞–Ω–∏—è —Ä—É–∫ –≤ –∫—Ä–æ—Å—Å–æ–≤–µ—Ä–µ (–±–∏—Ü–µ–ø—Å)", base:"3√ó12‚Äì16", sets:3, id:"87549fc5f5de396c2b769f8990778ede"},
      {t:"–†–∞–∑–≤–µ–¥–µ–Ω–∏—è –≥–∞–Ω—Ç–µ–ª–µ–π –≤ —Å—Ç–æ—Ä–æ–Ω—ã", base:"3√ó12‚Äì16", sets:3, id:"6128640e54d2e669a0279310980d65cc"},
      {t:"–û—Ç–∂–∏–º–∞–Ω–∏—è –Ω–∞ –±—Ä—É—Å—å—è—Ö", base:"3√ó12‚Äì16", sets:3, id:"b8fac352889a4bd4c083d87dd4a1be10"}
    ],
    3:[
      {t:"–û—Ç–∂–∏–º–∞–Ω–∏—è —Å –Ω–æ–≥–∞–º–∏ –Ω–∞ –≤–æ–∑–≤—ã—à–µ–Ω–∏–∏", base:"4√ó–º–∞–∫—Å", sets:4, id:"8c3c63d02b943d3851527d03c5f0d70d"},
      {t:"–ñ–∏–º –≥–∞–Ω—Ç–µ–ª–µ–π –ª—ë–∂–∞ –Ω–∞ –ø–æ–ª—É", base:"3√ó8‚Äì12", sets:3, id:"8727ed482623ae3a9fce393d5456de68"},
      {t:"–¢—è–≥–∞ –≥–∞–Ω—Ç–µ–ª–µ–π –∫ –ø–æ—è—Å—É", base:"3√ó8‚Äì12", sets:3, id:"1816f401fa38ac77e8c912125728af74"},
      {t:"–û—Ç–∂–∏–º–∞–Ω–∏—è —É–∑–∫–∏–º —Ö–≤–∞—Ç–æ–º", base:"3√ó–º–∞–∫—Å", sets:3, id:"b968f2c89084c3d90b9add1da01cf39d"},
      {t:"–ü–æ–¥—ä—ë–º –≥–∞–Ω—Ç–µ–ª–µ–π –Ω–∞ –±–∏—Ü–µ–ø—Å", base:"3√ó12", sets:3, id:"2b0ae567aa5d0a00633594f26fe8bf2e"},
      {t:"–†–∞–∑–≤–µ–¥–µ–Ω–∏—è –≤ –Ω–∞–∫–ª–æ–Ω–µ (–∑–∞–¥–Ω–∏–µ –¥–µ–ª—å—Ç—ã)", base:"3√ó12‚Äì15", sets:3, id:"5bf13c73ef01f3a4629f00982b83788d"},
      {t:"–ü–ª–∞–Ω–∫–∞ —Å –∫–∞—Å–∞–Ω–∏–µ–º –ø–ª–µ—á", base:"3√ó40‚Äì60 —Å–µ–∫", sets:3, id:"6df677885d3361d1271228208387c6bd"}
    ]
  };

  const WEEKS = {
    1:{ add:0, note:"RIR 1‚Äì2" },
    2:{ add:0, note:"+5% –∏/–∏–ª–∏ +1 –ø–æ–≤—Ç, RIR 0‚Äì1" },
    3:{ add:0, note:"+10% –∏/–∏–ª–∏ +1‚Äì2 –ø–æ–≤—Ç, RIR 0 (–ø–æ –∂–µ–ª–∞–Ω–∏—é AMRAP)" },
    4:{ add:-1, note:"–î–µ–ª–æ–∞–¥ ‚àí10‚Äì20% –∏ ‚àí1 –ø–æ–¥—Ö–æ–¥, RIR 2‚Äì3" }
  };

  const root = document.getElementById('root');
  const tabs = document.querySelectorAll('.tab');
  const weekSelect = document.getElementById('weekSelect');
  const tg = window.Telegram && window.Telegram.WebApp;
  if(tg) tg.expand();
  let day = 1;

  tabs.forEach(b=>b.onclick=()=>{ tabs.forEach(x=>x.classList.remove('active')); b.classList.add('active'); day=+b.dataset.day; render(); });
  weekSelect.onchange = render;

  function today(){
    const d=new Date(), w=["–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ","–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫","–í—Ç–æ—Ä–Ω–∏–∫","–°—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä–≥","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞"][d.getDay()], m=["—è–Ω–≤–∞—Ä—è","—Ñ–µ–≤—Ä–∞–ª—è","–º–∞—Ä—Ç–∞","–∞–ø—Ä–µ–ª—è","–º–∞—è","–∏—é–Ω—è","–∏—é–ª—è","–∞–≤–≥—É—Å—Ç–∞","—Å–µ–Ω—Ç—è–±—Ä—è","–æ–∫—Ç—è–±—Ä—è","–Ω–æ—è–±—Ä—è","–¥–µ–∫–∞–±—Ä—è"][d.getMonth()];
    return `${d.getDate()} ${m}, ${w}`;
  }
  function key(n){ return `fb_${day}_${weekSelect.value}_${n.replace(/\s+/g,'_')}`; }
  function setRow(i,w='',r=''){ const el=document.createElement('div'); el.className='row'; el.innerHTML=`
    <div class="badge">${i}</div>
    <label class="input"><input type="number" step="0.5" inputmode="decimal" placeholder="–ö–ì" value="${w}"><span class="suffix">–∫–≥</span></label>
    <label class="input"><input type="number" step="1" inputmode="numeric" placeholder="—Ä–∞–∑" value="${r}"><span class="suffix">—Ä–∞–∑</span></label>`; return el; }

  function card(ex){
    const setsSaved = JSON.parse(localStorage.getItem(key(ex.t))||'[]');
    const add = WEEKS[weekSelect.value].add || 0;
    const baseSets = Math.max(1, ex.sets + add);

    const wrap = document.createElement('section');
    wrap.className='card'; wrap.dataset.exercise=ex.t;
    wrap.innerHTML = `
      <div class="head">
        <div class="left">
          <div class="thumb">üèãÔ∏è</div>
          <div><div class="title">${ex.t}</div><div class="meta">${ex.base} ‚Ä¢ ${WEEKS[weekSelect.value].note}</div></div>
        </div>
        <div class="avatar">üë§</div>
      </div>
      <div class="video">
        ${ex.id ? `<iframe src="https://rutube.ru/play/embed/${ex.id}" allowfullscreen></iframe>` : ''}
      </div>
      <div class="body">
        <div class="history">–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π:</div>
        <div class="date">${today()}</div>
        <div class="sets"></div>
        <div class="actions">
          <button class="btn add">+ –ü–æ–¥—Ö–æ–¥</button>
          <button class="btn del">‚àí –£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>`;

    const box = wrap.querySelector('.sets');
    const count = setsSaved.length ? setsSaved.length : baseSets;
    for(let i=1;i<=count;i++){ const s=setsSaved[i-1]||{}; box.appendChild(setRow(i, s.weight||'', s.reps||'')); }
    wrap.querySelector('.add').onclick=()=>box.appendChild(setRow(box.children.length+1));
    wrap.querySelector('.del').onclick=()=>{ if(box.children.length>1) box.lastElementChild.remove(); };
    return wrap;
  }

  function render(){
    root.innerHTML='';
    PROGRAM[day].forEach(ex=> root.appendChild(card(ex)));
  }
  render();

  document.getElementById('clearBtn').onclick = ()=>{
    Object.keys(localStorage).filter(k=>k.startsWith(`fb_${day}_${weekSelect.value}_`)).forEach(k=>localStorage.removeItem(k));
    render();
  };

  document.getElementById('saveBtn').onclick = ()=>{
    const payload=[];
    root.querySelectorAll('.card').forEach(card=>{
      const name=card.dataset.exercise, list=[];
      card.querySelectorAll('.row').forEach((r,i)=>{
        const [w,rp]=r.querySelectorAll('input');
        const weight=w.value.trim(), reps=rp.value.trim();
        if(weight||reps){ list.push({set:i+1, weight, reps}); payload.push({day, week:+weekSelect.value, exercise:name, set:i+1, weight, reps, ts:new Date().toISOString()}); }
      });
      localStorage.setItem(key(name), JSON.stringify(list));
    });
    if(window.Telegram && window.Telegram.WebApp){ window.Telegram.WebApp.sendData(JSON.stringify(payload)); window.Telegram.WebApp.close(); }
    else alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ:\n'+JSON.stringify(payload,null,2));
  };
</script>
</body>
</html>
